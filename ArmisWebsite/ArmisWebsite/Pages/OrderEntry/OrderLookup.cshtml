@page "{handler?}"
@model ArmisWebsite.Pages.OrderEntry.OrderLookupModel
@{
    ViewData["Title"] = "OrderLookup";
}

<div class="container-fluid w-75">
    <h1>Order Lookup</h1>

    @if (Model.Message != null)
    {<text>@Model.Message</text>}

    <form asp-page-handler="ordernumber" method="get">
        <div class="row">
            <input class="form-control w-50" placeholder="Order Number" asp-for="OrderNumber" />
            <button type="submit" class="btn btn-primary mx-1">Find</button>
        </div>
    </form>

    @if (Model.OrderHead != null)
    {
        <div class="row mt-2">
            <div class="col-lg-4"></div>
            <div class="col-lg-4 card p-2">
                <div class="card-title text-center"><h5>Order # @Model.OrderHead.OrderId</h5></div>
                <div class="row border-bottom mb-2"><span class="col-lg-6">Customer</span> <span class="col-lg-6 flex-align-right">@Model.OrderHead.Customer.Name</span></div>
                <div class="row border-bottom mb-2"><span class="col-lg-6">PO Number</span> <span class="col-lg-6 flex-align-right">@Model.OrderHead.Ponum</span></div>
            </div>
            <div class="col-lg-4"></div>
        </div>

        <div class="row my-2">
            <div class="col-lg-4 card p-2">
                <div class="card-title text-center"><h5>Dates</h5></div>
                <div class="row border-bottom mb-2">
                    <span class="col-lg-6">Order Date</span>
                    <span class="col-lg-6 flex-align-right">@Model.OrderHead.OrderDate.Date.ToShortDateString()</span>
                </div>
                <div class="row border-bottom mb-2">
                    <span class="col-lg-6">Due Date</span>
                    @if (Model.OrderHead.DueDate != null)
                    {<span class="col-lg-6 flex-align-right">@Model.OrderHead.DueDate.Value.Date.ToShortDateString()</span>}
                </div>
                <div class="row border-bottom mb-2">
                    <span class="col-lg-6">Ship Date</span>
                    @if (Model.OrderHead.ShipDate != null)
                    {<span class="col-lg-6 flex-align-right">@Model.OrderHead.ShipDate.Value.Date.ToShortDateString()</span>}
                </div>
                <div class="row border-bottom mb-2">
                    <span class="col-lg-6">Ship Time</span>
                    <span class="col-lg-6 flex-align-right">@Model.OrderHead.ShipTime</span>
                </div>
                <div class="row border-bottom mb-2">
                    <span class="col-lg-6">Requested Date</span>
                    @if (Model.OrderHead.ReqDate != null)
                    {<span class="col-lg-6 flex-align-right">@Model.OrderHead.ReqDate.Value.Date.ToShortDateString()</span>}
                </div>
                <div class="row border-bottom mb-2">
                    <span class="col-lg-6">Done Date</span>
                    @if (Model.OrderHead.DoneDate != null)
                    {<span class="col-lg-6 flex-align-right">@Model.OrderHead.DoneDate.Value.Date.ToShortDateString()</span>}
                </div>
                <div class="row border-bottom mb-2">
                    <span class="col-lg-6">Done Time</span> <span class="col-lg-6 flex-align-right">@Model.OrderHead.DoneTime</span>
                </div>
                <div class="row border-bottom mb-2">
                    <span class="col-lg-6">Target Date</span>
                    @if (Model.OrderHead.TargetDate != null)
                    {<span class="col-lg-6 flex-align-right">@Model.OrderHead.TargetDate.Value.Date.ToShortDateString()</span>}
                </div>
                <div class="row border-bottom mb-2">
                    <span class="col-lg-6">Due Date</span>
                    @if (Model.OrderHead.DueDate != null)
                    {<span class="col-lg-6 flex-align-right">@Model.OrderHead.DueDate.Value.Date.ToShortDateString()</span>}
                </div>
            </div>

            <div class="col-lg-3 card p-2 mx-2">
                <div class="card-title text-center"><h5>Order Details</h5></div>
                <div class="row p-2"><div class="col-lg-6 border-right border-bottom">Part ID</div><div class="col-lg-3 border-right border-bottom">Part Rev</div><div class="col-lg-3 border-bottom">Qty</div></div>
                @foreach (var orderDetail in Model.OrderHead.OrderDetails)
                {
                    <div class="row p-2">
                        <div class="col-lg-6 border-right border-bottom">@orderDetail.PartId</div><div class="col-lg-3 border-right border-bottom">@orderDetail.PartRevId</div><div class="col-lg-3 border-bottom">@orderDetail.Quantity</div>
                    </div>
                }
            </div>

            @{ var currentSpecAssignment = Model.OrderHead.Spec; } @*This is just to make it easier to reference the current spec process assign for the order head model.*@
            <div class="col-lg-4 card p-2">
                <div class="card-title text-center"><h5>Specification Details</h5></div>
                @currentSpecAssignment.SpecificationRevision.Description
                
            </div>
        </div>

    }
</div>